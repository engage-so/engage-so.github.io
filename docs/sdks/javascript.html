<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <title></title>

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="Event driven customer segmentation and targeted engagement">
  <meta name="slack-app-id" content="A6566DWTS">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/tachyons.css">
  <link rel="stylesheet" href="/css/tomorrow-night.css">
  <link rel="stylesheet" href="/css/site.css">
</head>
<body>
  <div class="flex f5">
    <div class="w-20 pv3 ph4 sidebar fixed">
      <ul class="nav">
        <li><a href="">Segments</a></li>
        <li><a href="">Lists</a></li>
        <li><a href="">Personalisation tags</a></li>
        <li><a href="/docs/bring-your-users.html">Bringing in your users</a></li>
        <li>
          <a href="">API</a>
          <ul class="nav ml3">
            <li><a href="">Introduction</a></li>
          </ul>
        </li>
        <li>
          <a href="">SDKs</a>
          <ul class="nav ml3">
            <li><a href="/docs/sdks/javascript.html">Javascript SDK</a></li>
          </ul>
        </li>
        <li><a href="">Templates</a></li>
      </ul>
    </div>
    <div class="w-80 pv4 ph5 mainbar">
      <h1>Javascript SDK</h1>
<p>The Javascript SDK allows you to automatically identify users and capture actions and attributes on your site. It can be used both in Node.js or in the browser.</p>
<p><em>New to Engage? Create an account</em></p>
<h3>Installation</h3>
<p><strong>NPM</strong>
<code>npm install —save @engage/js</code>
Or
<code>yarn add @engage/js</code></p>
<p><strong>CDN</strong>
Alternatively, you can simply load it from our CDN
<code>&lt;script src=“//d2wy8f7a9ursnm.cloudfront.net/next/engage.min.js”&gt;&lt;/script&gt;</code></p>
<h3>Configuration</h3>
<pre class="hljs"><code><span class="hljs-comment">// commonjs/node-style require</span>
<span class="hljs-keyword">const</span> Engage = <span class="hljs-built_in">require</span>(‘@engage/js’)
</code></pre>
<pre class="hljs"><code><span class="hljs-comment">// ES module-style import</span>
<span class="hljs-keyword">import</span> Engage <span class="hljs-keyword">from</span> ‘@engage/js’
</code></pre>
<p>Use default configuration</p>
<pre class="hljs"><code>Engage.init(<span class="hljs-string">&#x27;api_key&#x27;</span>)
</code></pre>
<p>Additional options</p>
<pre class="hljs"><code>Engage.init(options)
</code></pre>
<p><strong>options</strong></p>
<ul>
<li>key</li>
<li>secret: Engage identifies your application with the <code>key</code> parameter. This is enough to identify and track user actions. If however you want to do more, like update or delete user data, you need to add your <code>secret</code>. This should only be used in server side apps as your secret should be treated as a password and kept confidential.</li>
<li><s>source</s></li>
<li><s>trackPages</s></li>
<li><s>debug</s></li>
</ul>
<h3>Identifying users</h3>
<p>Before you can track user actions or user properties, Engage needs to know some basic information about the user–a unique id, email, name (optional) and when the user signed up on your application. (See bringing in your users for more). You only need to do this once; at user signup for example.</p>
<pre class="hljs"><code>Engage.identify({
 <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;u13345&#x27;</span>,
 <span class="hljs-attr">email</span>: <span class="hljs-string">&#x27;dan@mail.app&#x27;</span>,
 <span class="hljs-attr">created_at</span>: <span class="hljs-string">&#x27;2020-05-30T09:30:10Z&#x27;</span>
})
</code></pre>
<p><em>id should be a unique identifier for the user. It should be a value that will not change in your application. For example, don’t use a username as id if users can update their usernames</em></p>
<p>The <code>created_at</code> property is optional. If not added, Engage sets it to the current timestamp. Other optional properties you can include are:</p>
<ul>
<li>first_name</li>
<li>last_name</li>
</ul>
<p>If you need to update any of the properties (created_at, first_name, last_name), you can call <code>identify</code> with the property set to the new value. This only works when you use the <code>secret</code> parameter to initialise the SDK. Update is not allowed for client side integration. (Remember, only use your secret key in server side integrations).</p>
<p>If you want to update <code>email</code>  this way, the new email should not have been “identified” with a different user id.</p>
<h3>Tracking user attributes</h3>
<p>You can add attributes to users for segmentation. Allowed values for user attributes are boolean, numbers or strings.</p>
<pre class="hljs"><code>Engage.addAttributes(<span class="hljs-string">&#x27;user_id&#x27;</span>, {
 <span class="hljs-attr">plan</span>: <span class="hljs-string">&#x27;pro&#x27;</span>,
 <span class="hljs-attr">promotion</span>: <span class="hljs-literal">true</span>
})
</code></pre>
<p>If an attribute changes at a later date, you can use the same method to update the new value.</p>
<pre class="hljs"><code>Engage.addAttributes(<span class="hljs-string">&#x27;user_id&#x27;</span>, {
 <span class="hljs-attr">plan</span>: <span class="hljs-string">&#x27;premium&#x27;</span>
})
</code></pre>
<h3>Tracking user events and actions</h3>
<p>Events and user actions can be tracked in a couple of ways. The simplest way to do this is like this:</p>
<pre class="hljs"><code>Engage.track(<span class="hljs-string">&#x27;user_id&#x27;</span>, <span class="hljs-string">&#x27;deactivate&#x27;</span>)
</code></pre>
<pre class="hljs"><code>Engage.track(<span class="hljs-string">&#x27;user_id&#x27;</span>, {
 <span class="hljs-attr">event</span>: <span class="hljs-string">&#x27;new_badge&#x27;</span>,
 <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;gold&#x27;</span>
 <span class="hljs-attr">timestamp</span>: <span class="hljs-string">&#x27;2020-05-30T09:30:10Z&#x27;</span>
})
</code></pre>
<p><code>timestamp</code> is optional. If it is not included, Engage uses the current timestamp. If included, it must be a valid date time string.</p>
<p>Some actions may have additional properties instead of a single value. Here is how to track those:</p>
<pre class="hljs"><code>Engage.track(<span class="hljs-string">&#x27;user_id&#x27;</span>, {
 <span class="hljs-attr">event</span>: <span class="hljs-string">&#x27;add_to_cart&#x27;</span>,
 <span class="hljs-attr">timestamp</span>: <span class="hljs-string">&#x27;2020-05-30T09:30:10Z&#x27;</span>,
 <span class="hljs-attr">properties</span>: {
   <span class="hljs-attr">product</span>: <span class="hljs-string">&#x27;T123&#x27;</span>,
	 <span class="hljs-attr">currency</span>: <span class="hljs-string">&#x27;USD&#x27;</span>,
   <span class="hljs-attr">amount</span>: <span class="hljs-number">12.99</span>
 }
})
</code></pre>
<h3>Difference between attribute and events tracking</h3>
<p>Attributes are attached to the user’s metadata. If an attribute changes, the new value overrides the previous value. Events are not tracked that way. If an event’s value changes, the old value is not replaced. The new value is tracked with a different timestamp. This lets you be able to segment users based on old events within a time range.</p>
<h3>A note on values</h3>
<p>When tracking attributes and actions, it is important you use the right data type for better segmentation. For example, instead of using a string value of ‘$12.99’ for a price, you can use a number value so that numerical operators like equality, greater than, less than can be used on the value.</p>
<p>To track a date attribute, use a valid date format like <code>2020-05-30</code> or <code>2020-05-30T09:30:10Z</code>.</p>

    </div>
  </div>
</body>
</html>
