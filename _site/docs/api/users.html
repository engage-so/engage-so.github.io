<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <title>API - Users</title>

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="">
  <meta name="slack-app-id" content="A6566DWTS">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@600,700&family=Fira+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/tachyons.css">
  <link rel="stylesheet" href="/css/monokai.css">
  <link rel="stylesheet" href="/css/docs.css">
</head>
<body>
  <div class="flex f5">
    <div class="w-20 pa4 sidebar fixed">
      <div class="mb4">
        <a href="/docs"><img src="/images/engage-docs-logo.png" style="width:100%;max-width:150px"></a>
      </div>

      <!-- <div class="mv4">
        <input type="search" placeholder="Search..." class="w-100">
      </div> -->
      <ul class="nav">
        <li><a href="/docs">Introduction</a></li>
      </ul>

      <h3 class="mb1 small-caps faint">Platform guide</h3>
      <ul class="nav">
        <li><a href="/docs/guides/connecting-user-data">Connecting customer data</a></li>
        <li><a href="/docs/guides/segments">Segmenting customers</a></li>
        <li><a href="/docs/guides/broadcasts">Broadcasts</a></li>
        <li><a href="/docs/guides/automations">Automations</a></li>
        <li><a href="/docs/guides/lists">Lists</a></li>
        <li><a href="/docs/guides/tags">Personalisation tags</a></li>
        <li><a href="/docs/guides/templates">Templates management</a></li>
        <li><a href="/docs/guides/member-roles">Team member roles</a></li>
      </ul>
      <h3 class="mb1 small-caps faint">Integrations</h3>
      <ul class="nav">
        <!-- <li><a href="/docs/integrations/paystack">Paystack</a></li> -->
        <li>
          <a href="/docs/api">API</a>
          <ul class="nav ml3">
            <li><a href="/docs/api">Introduction</a></li>
            <li><a href="/docs/api/users" class="active">Users</a></li>
            <!-- <li><a href="/docs/api/lists">Lists</a></li> -->
          </ul>
        </li>
        <li>
          <a href="/docs/sdks">SDKs</a>
          <ul class="nav ml3">
            <li><a href="/docs/sdks/javascript.html">JavaScript</a></li>
            <li><a href="/docs/sdks/php.html">PHP</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <div class="w-80 pv4 ph5 mainbar">
      <div class="w-70-l w-100">
        <article class="pb5 docs">
          <h1 id="users">Users</h1>

<ul>
  <li><a href="#the-user-object">The user object</a></li>
  <li><a href="#create-a-user">Create a User</a></li>
  <li><a href="#retrieve-a-user">Retrieve a User</a></li>
  <li><a href="#update-user-attributes">Update User attributes</a></li>
  <li><a href="#add-user-events">Add User events</a></li>
  <li><a href="#list-users">List Users</a></li>
</ul>

<h2 id="the-user-object">The User object</h2>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fc6477241fcec31a9548e98"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a.jinadu@somecorp.email"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uid_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Akinyele"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jinadu"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a.jinadu@somecorp.email"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"devices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"lists"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"segments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pro"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-01-12T05:24:39.062+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">id</code> - A unique internal identifier for the user object.</li>
  <li><code class="highlighter-rouge">uid</code> - The user’s unique identifier in your application. If an id wasn’t attached to the user data at creation (if the user was created through an integration for example), there will be an additional <code class="highlighter-rouge">uid_updateable</code> field with value <code class="highlighter-rouge">true</code>. This means you can make an update request to update the <code class="highlighter-rouge">uid</code>. Otherwise you cannot update the <code class="highlighter-rouge">uid</code>.</li>
  <li><code class="highlighter-rouge">first_name</code> - The user’s first name if added.</li>
  <li><code class="highlighter-rouge">last_name</code> - The user’s last name if added.</li>
  <li><code class="highlighter-rouge">number</code> - The user’s number if added.</li>
  <li><code class="highlighter-rouge">email</code> - The user’s email.</li>
  <li><code class="highlighter-rouge">devices</code> - An array of object with the properties <code class="highlighter-rouge">token</code> and <code class="highlighter-rouge">platform</code> containing the user’s last 5 device tokens and platform (<code class="highlighter-rouge">android</code> or <code class="highlighter-rouge">ios</code>) if synced.</li>
  <li><code class="highlighter-rouge">lists</code> - An array of object with the properties <code class="highlighter-rouge">id</code> and <code class="highlighter-rouge">subscribed</code> containing the id and subscription status of <a href="/docs/guides/lists">lists</a> the user belongs to.</li>
  <li><code class="highlighter-rouge">segments</code> - An array of object with the properties <code class="highlighter-rouge">id</code> and <code class="highlighter-rouge">suppressed</code> containing the id and suppression status of <a href="/docs/guides/segments">segments</a> the user belongs to. Suppressed mean the user has unsubscribed from a broadcast sent to this segment and will no longer get new broadcasts.</li>
  <li><code class="highlighter-rouge">created_at</code> - Date created if exists.</li>
  <li><code class="highlighter-rouge">meta</code> - Additional attributes attached to the user will be available as properties under meta.</li>
</ul>

<h2 id="create-a-user">Create a User</h2>

<p>Adds a new user to your Engage account. Use this to sync customer data with Engage when a customer signs up on your application.</p>

<p>Works with username authentication.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /users
</code></pre></div></div>

<p>Parameters:</p>
<ul>
  <li><code class="highlighter-rouge">id</code> - Required. An identifier for the user in your application. You can subsequently use this to update or retrieve the user. Can only contain alhabets and numbers.</li>
  <li><code class="highlighter-rouge">lists</code> - Optional. An array of ids of lists you want to subscribe the user to. Opt-in confirmations are not sent for these even if enabled for the lists.</li>
  <li><code class="highlighter-rouge">first_name</code> - Optional. The user’s first name</li>
  <li><code class="highlighter-rouge">last_name</code> - Optional. The user’s last name</li>
  <li><code class="highlighter-rouge">number</code> - Optional. The user’s phone number in international format</li>
  <li><code class="highlighter-rouge">email</code> - Optional. The user’s email</li>
  <li><code class="highlighter-rouge">created_at</code> - Optional. Date the user signed up on your application. Should be a valid date string.</li>
  <li><code class="highlighter-rouge">meta</code> - Optional. An object that can contain additional user attributes. The values can be a string, number or boolean.</li>
</ul>

<p>Example request data:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u144"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Akinyele"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jinadu"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a.jinadu@somecorp.email"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pro"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-01-12T05:24:39.062+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>The method returns the user object. If there is an error with any of the parameters, it will return a 400 HTTP status code with details in an error object.</p>

<h2 id="retrieve-a-user">Retrieve a User</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /users/{uid}
</code></pre></div></div>

<p>The method returns the user object.</p>

<h2 id="update-user-attributes">Update User attributes</h2>

<p>Update user data and attributes. Use this to update user data changes like change in plan, name, location, etc on Engage. If the user doesn’t exist, this method creates the user. If the user does not have an id attached before (i.e, if <code class="highlighter-rouge">uid_updateable</code> is true), the request <code class="highlighter-rouge">uid</code> is set as the new id.</p>

<p>Works with username authentication if not updating the user’s email. Updating the user’s email requires full (key and secret) authentication.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PUT /users/{uid}
</code></pre></div></div>

<p>Parameters can be any or more of the following:</p>
<ul>
  <li><code class="highlighter-rouge">first_name</code> - The user’s first name</li>
  <li><code class="highlighter-rouge">last_name</code> - The user’s last name</li>
  <li><code class="highlighter-rouge">number</code> - The user’s phone number in international format</li>
  <li><code class="highlighter-rouge">email</code> - The user’s email. Requires both username and password authentication</li>
  <li><code class="highlighter-rouge">created_at</code> - Date the user signed up on your application. Should be a valid date string</li>
  <li><code class="highlighter-rouge">meta</code> - An object containing additional user attributes to add or update. Should be string, number or boolean</li>
</ul>

<p>Example request data:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w"> 
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-01-12T05:24:39.062+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>The method returns the updated user object. If there is an error with any of the parameters, it will return a 400 HTTP status code with details in an error object.</p>

<h2 id="add-user-events">Add User events</h2>

<p>Add user events to Engage. Use this to add user actions and events on your application to Engage. You can later segment your users based on these actions or events.</p>

<p>Works with username authentication.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /users/{uid}/events
</code></pre></div></div>

<p>Parameters:</p>
<ul>
  <li><code class="highlighter-rouge">event</code> - Required. The event title</li>
  <li><code class="highlighter-rouge">value</code> - Optional. The event value. Can be a string, number or boolean</li>
  <li><code class="highlighter-rouge">properties</code> - Optional. An object containing additional event properties. Property values can only be string, number or boolean</li>
  <li><code class="highlighter-rouge">timestamp</code> - Optional. Timestamp of the event. If none provided, the current time is used.</li>
</ul>

<p>Example request data:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Add to cart"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-30T09:30:10Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.99</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Another example:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Paid"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">49.99</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Example response:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>If there is an error with any of the parameters, it will return a 400 HTTP status code with details in an error object.</p>

<h2 id="list-users">List Users</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /users
</code></pre></div></div>

<p>Parameters:</p>
<ul>
  <li><code class="highlighter-rouge">limit</code> - Optional. Number of users to return. Defaults to 10. Maximum of 30.</li>
  <li><code class="highlighter-rouge">after_id</code> - Optional. List users with internal IDs greater than this value.</li>
  <li><code class="highlighter-rouge">before_id</code> - Optional. List users with internal IDs lesser than this value.</li>
</ul>

<p>Remember, you can only use one of <code class="highlighter-rouge">after_id</code> and <code class="highlighter-rouge">before_id</code>. See <a href="/docs/api/#pagination">pagination</a> for more.</p>

        </article>
      </div>
    </div>
  </div>
</body>
</html>
